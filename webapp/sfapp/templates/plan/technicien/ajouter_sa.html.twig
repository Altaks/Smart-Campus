{% extends 'base.html.twig' %}

{% block title %}Ajouter un systèmes{% endblock %}

{% block body %}
<main>
    <h1 class="text-4xl py-12 text-center">Ajouter un système d'acquisition</h1>

    {{ form_start(form) }}
    <div class="max-w-screen-xl w-5/6 mx-auto mt-10 flex flex-col items-center">
        <span class="text-2xl">{{ form_label(form.nom, "Nom du système") }}</span>
        {{ form_widget(form.nom, {  'attr': {'placeholder': 'Ex: ESP-001', 'class': 'mt-5 text-xl bg-gray-50 border border-gray-300 text-gray-900 rounded-lg px-4 py-3', 'id': 'nom'}}) }}
        {{ form_errors(form.nom, {
            error_item_class: 'text-red-600 text-sm mt-1',
        }) }}
        <span class="text-2xl mt-8">{{ form_label(form.nom, "Nom de la base de données") }}</span>
        {{ form_widget(form.baseDonnees, { 'attr': {'placeholder': 'Ex: sae34bdk2eq1', 'class': 'mt-5 text-xl bg-gray-50 border border-gray-300 text-gray-900 rounded-lg px-4 py-3', 'id': 'baseDonnees'} })  }}
        {{ form_errors(form.baseDonnees, {
            error_item_class: 'text-red-600 text-sm mt-1',
        }) }}
        {% if errorBaseDonnees %}
            <p class="text-red-600 text-sm mt-1">{{ errorBaseDonnees }}</p>
        {% endif %}
        {{ form_widget(form.save, { 'label': 'Ajouter le système',  'attr': {'class': 'cursor-not-allowed rounded-lg bg-[#0f6eb1] text-white py-3 self-center mt-6 px-10', 'id': 'submit'}  })  }}

    </div>
    {{ form_end(form) }}


</main>

<script>
    let sa = document.getElementById('form_nom');
    let baseDonnees = document.getElementById('form_baseDonnees');

    sa.addEventListener('input', function() {
        let sa = document.getElementById('form_nom');
        if (sa.value.length === 0) {
            disableSubmitButton()
        } else {
            let baseDonnees = document.getElementById('form_baseDonnees');
            disableSubmitButton()
            if( baseDonnees.value.length === 0) {
            }
            else {
                enableSubmitButton();
            }
        }
    })

    baseDonnees.addEventListener('input', function(e) {
        let baseDonnees = document.getElementById('form_baseDonnees');
        if (baseDonnees.value.length === 0) {
            disableSubmitButton()
        } else {
            let sa = document.getElementById('form_nom');
            if( sa.value.length === 0) {
                disableSubmitButton();
            }
            else {
                enableSubmitButton();
            }
        }
    });

    function enableSubmitButton(){
        let button = document.getElementById("form_save");
        if (button.disabled){
            button.disabled = false;
            button.classList.remove("cursor-not-allowed");
            button.classList.add("hover:bg-sky-600");
        }
    }
    function disableSubmitButton(){
        let button = document.getElementById("form_save");
        if (!button.disabled){
            button.disabled = true;
            button.classList.add("cursor-not-allowed");
            button.classList.remove("hover:bg-sky-600");
        }
    }
</script>


{% endblock %}
